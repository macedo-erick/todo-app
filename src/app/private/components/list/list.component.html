@if (list(); as list) {
  <mat-card class="wrapper w-100">
    <mat-card-title class="d-flex justify-content-between py-2 px-2">
      <h2
        class="fs-7 fw-bolder content__editable select-none py-2 px-2 m-0 text-white"
        contenteditable
        #h1
        (blur)="handleTitleChange(list, h1.innerText)"
      >
        {{ list.name }}
      </h2>

      <button
        mat-icon-button
        class="text-white hoverable"
        [matMenuTriggerFor]="listMenu"
      >
        <mat-icon>more_horiz</mat-icon>
      </button>
    </mat-card-title>

    <mat-card-content class="px-2">
      <ol
        class="ls-none d-flex flex-column p-1 gap-2"
        cdkDropList
        [cdkDropListData]="list.cards"
        (cdkDropListDropped)="drop($event)"
      >
        @for (card of list.cards; track card.name) {
          <li cdkDrag>
            <todo-card [card]="card" (click)="showCardDetails(card)" />
          </li>
        }
      </ol>
    </mat-card-content>

    <mat-card-actions class="d-flex px-2">
      <button
        mat-button
        class="btn hoverable fs-8 text-white d-flex flex-grow-1 justify-content-start"
        (mousedown)="addCard()"
      >
        <mat-icon>add</mat-icon>
        <span>Add a card</span>
      </button>
    </mat-card-actions>
  </mat-card>
}

<mat-menu #listMenu="matMenu" class="overlay__bg">
  <button
    (click)="removedList.emit()"
    mat-menu-item
    class="text-white hoverable"
  >
    Delete list
  </button>
</mat-menu>
